---
title: "Networking 2: TCP VS UDP PROTOCAL"
date: 2021-12-09T11:43:43+08:00
draft: true
toc: false
images:
  - "images/totoro.jpeg"
tags: 
  - Network
---

**TCP**（Transmission Control Protocol）又叫传输控制协议，TCP是面向连接的，并且是一种可靠的协议，在基于TCP进行通信时，通信双方需要建立TCP连接，建立连接需要经过三次握手，握手成功才可以通信。
**UDP** (Datagram oriented protocol) 是一种面向无连接，切不可靠的协议，在通信过程中，它并不像TCP那样需要先建立一个连接，只要目的地址，端口号，源地址，端口号确定了，就可以直接发送信息报文，并且不需要一定能收到或者完整的数据。它仅仅提供了校验和机制来保障报文是否完整，若校验失败，则直接将报文丢弃，不做任何处理。

区别：

1. TCP协议是connection-oriented protoco**面向连接的协议**； UDP 是connectionless protocol**无连接的协议**.
2. TCP 以**字节流的形式读取数据**，并将消息传输到段边界；UDP 消息包含一个一个**发送的数据包**。它还在到达时间检查完整性。
3. TCP 消息通过 Internet 从**一台计算机传输到另一台计算机**；UDP **一个程序可以向另一个程序**发送大量数据包。
4. TCP **按特定顺序重新排列数据包**；UDP 协议没有固定的顺序，所有的数据包都是**相互独立的**。
5. TCP 的**速度较慢，header = 20 bytes**; UDP **速度快， header = 8 bytes**。
6. TCP 有多种检测错误的方法，进行错误检查并进行错误恢复；UDP 只有一个检查错误的方法**checksums**,执行错误检查，但它会丢弃错误的数据包。
7. TCP 使用握手协议是**可靠**的，因为它保证将数据传送到目标路由器； UDP 没有握手协议，**不可靠**，无法保证将数据传送到目的地。
8. TCP 可靠，稳定 用于计算机之间连接,例如**HTTP, HTTPS,SMTP**；UDP 传输数据速度快，用于**语音，视频和在线游戏连接**。
9. 缺点：TCP **不能用于广播或多播传输**, **速度慢，效率比较低**，**占用系统资源**，**容易被攻击**。三次握手机制导致TCP容易被人利用，实现**DOS，DDOS攻击**。      UDP **不可靠，不稳定**，在网络质量不好的时候**容易丢包**。



### **TCP怎么保证传输过程的可靠性？**

> **校验和 checksums**：发送方在发送数据之前计算校验和，接收方收到数据后同样计算，如果不一致，那么传输有误。
>
> **确认应答，序列号**：TCP进行传输时数据都进行了编号，每次接收方返回ACK都有确认序列号。
>
> **超时重传**：如果发送方发送数据一段时间后没有收到ACK，那么就重发数据。
>
> **连接管理**：三次握手和四次挥手的过程。
>
> **流量控制**：TCP协议报头包含16位的窗口大小，接收方会在返回ACK时同时把自己的即时窗口填入，发送方就根据报文中窗口的大小控制发送速度。
>
> **拥塞控制**：刚开始发送数据的时候，拥塞窗口是1，以后每次收到ACK，则拥塞窗口+1，然后将拥塞窗口和收到的窗口取较小值作为实际发送的窗口，如果发生超时重传，拥塞窗口重置为1。这样做的目的就是为了保证传输过程的高效性和可靠性。